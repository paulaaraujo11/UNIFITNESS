function ContentValidator(){var $public=this;var $private={};$public.isFilledObject=function(entity){if(!entity||entity.constructor!==Object){return false;}for(var key in entity){return true;}return false;};$public.stringIsNotEmpty=function(string){if(typeof string!=="string"){return false;}return $private.trimString(string).length>0;};$private.trimString=function(string){return string.replace(/^(\s+)|(\s+)$/gm,"").replace(/\s+/gm," ");};$public.stringMatches=function(string,regexp){if(!$public.stringIsNotEmpty(string)){return false;}return regexp.test(string);};return $public;}function TypeValidator(){var $public=this;var $private={};$private.contentValidator=new ContentValidator();$public.isDefined=function(value){return value!==undefined&&value!==null;};$public.isString=function(value){return $private.contentValidator.stringIsNotEmpty(value);};$public.isArray=function(value){return value&&value.constructor.toString()===Array.toString();};$public.isObject=function(entity){return entity&&entity.constructor.toString()===Object.toString();};$public.isFunction=function(value){return value!==undefined&&value.constructor.toString()===Function.toString();};$public.isNumber=function(value){return Number(value)===value;};$public.isInt=function(value){return $public.isNumber(value)&&value%1===0;};$public.isRegExp=function(value){return value!==undefined&&value.constructor.toString()===RegExp.toString();};$public.isNumericString=function(value){return $public.isString(value)&&!isNaN(value);};$public.isBoolean=function(value){return value!==undefined&&value.constructor.toString()==Boolean.toString();};return $public;}function Mercurio(){var $private={};var $public=this;$private.typeValidator=new TypeValidator();$private.whitelist=[".*"];$public.method=(window.addEventListener)?"message":"onmessage";$public.methodListener=(window.addEventListener)?"addEventListener":"attachEvent";$private.isOriginAllowed=function(origin){return true;};$public.get=function(key){try{return window.localStorage.getItem(key);}catch(e){}};$public.set=function(key,value){try{if($private.typeValidator.isString(key)&&$private.typeValidator.isString(value)){window.localStorage.setItem(key,value);return $public.get(key);}}catch(e){}};$public.removeItem=function(key){try{if($private.typeValidator.isString(key)){window.localStorage.removeItem(key);return true;}}catch(e){}return false;};$public.requestHandler=function(event){var data={};if(!$private.isOriginAllowed(event.origin)){return;}try{data=JSON.parse(event.data);}catch(e){}if(!$public[data.method]){return;}var value=$public[data.method](data.key,data.value);data=JSON.stringify({id:data.id,key:data.key,value:value});event.source.postMessage(data,event.origin);};}var mercurio=new Mercurio();window[mercurio.methodListener](mercurio.method,mercurio.requestHandler);